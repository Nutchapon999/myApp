@model IEnumerable<myApp.Models.Competency>
@{
    ViewBag.Title = "Home Page";
}

<main>
    <div class="card shadow border-0 m-3">
        <div class="card-header text-center border-0 py-3" style="background-color: #d1ecf1;">
            <i class="fa fa-list-alt text-primary" style="font-size: 60px;"></i>
            <h1><strong>Competency</strong></h1>
        </div>
        <div class="card-body border-0 mt-2">
            <a href="@Url.Action("CreateCompetency")" class="btn btn-success mb-3 btn-lg" style="width: auto; border-radius: 2rem"><i class="fa fa-plus" aria-hidden="true"><strong> เพิ่ม</strong></i></a>
            <a href="@Url.Action("UploadCompetency")" class="btn btn-primary mb-3 position-relative btn-lg" style="width: auto; border-radius: 2rem">
                <i class="fa fa-upload" aria-hidden="true"><strong> อัปโหลด</strong></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning">
                    <i class="fa fa-file-excel-o" style="font-size: medium" aria-hidden="true"></i>
                    <span class="visually-hidden">unread messages</span>
                </span>
            </a>
            <table class="table table-hover table-striped" id="myTable">
                <thead class="table-primary" style="font-size: 14px">
                    <tr>
                        <th width="5%">ชนิด</th>
                        <th width="5%">รหัส</thwidth="5%">
                        <th width="5%">การใช้งาน</th>
                        <th width="10%">ชื่อภาษาไทย</th>
                        <th width="10%">ชื่อภาษาอังกฤษ</th>
                        <th width="10%">Definition</th>
                        <th width="10%">pl1</th>
                        <th width="10%">pl2</th>
                        <th width="10%">pl3</th>
                        <th width="10%">pl4</th>
                        <th width="10%">pl5</th>
                        <th width="5%"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var cmpty in Model)
                    {
                        <tr>
                            <th scope="row">@cmpty.Type</th>
                            <th scope="row">@cmpty.CompetencyId</th>
                            <td style="@(cmpty.Active ? "background-color: green; color: white" : "background-color: red; color: white")">@(cmpty.Active ? "ใช้" : "ไม่ใช้")</td>
                            <td style="font-size: 14px">@cmpty.CompetencyNameTH</td>
                            <td style="font-size: 14px">@cmpty.CompetencyNameEN</td>
                            <td style="font-size: 12px">@cmpty.CompetencyDesc</td>
                            <td style="font-size: 12px">@cmpty.Pl1</td>
                            <td style="font-size: 12px">@cmpty.Pl2</td>
                            <td style="font-size: 12px">@cmpty.Pl3</td>
                            <td style="font-size: 12px">@cmpty.Pl4</td>
                            <td style="font-size: 12px">@cmpty.Pl5</td>
                            <td>
                                <div class="btn-group me-2" role="group" aria-label="Second group">
                                    <button id="link" type="button" class="btn btn-primary" title="แก้ไข" data-bs-toggle="modal" data-bs-target="#editModal-@cmpty.CompetencyId">
                                        <i class="fa fa-pencil" aria-hidden="true"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal-@cmpty.CompetencyId" title="ลบ">
                                        <i class="fa fa-trash" aria-hidden="true"></i>
                                    </button>
                                </div>


                                <div class="modal fade modal-xl" id="editModal-@cmpty.CompetencyId" aria-labelledby="editModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content container">
                                            <div class="modal-body">
                                                <div class="py-2 text-center bg- rounded" style="background-color: #f8d7da">
                                                    <i class="fa fa-list-alt text-danger" style="font-size:50px;"></i>
                                                    <h2><strong>แก้ไข Competency</strong></h2>
                                                    <h3>รหัส Competency: @cmpty.CompetencyId</h3>
                                                </div>
                                            </div>
                                            @using (Html.BeginForm("EditCompetency", "Home", FormMethod.Post))
                                            {
                                                <input type="hidden" name="CompetencyId" value="@cmpty.CompetencyId" />
                                                <div class="row mb-3">
                                                    <div class="col-md ms-3">
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #f8d7da; border-color: #ae6070; color: #b34045 ">
                                                                <i class="fa fa-key mt-2" aria-hidden="true">
                                                                    <strong><label for="editType">ชนิด</label></strong>
                                                                </i>
                                                            </span>
                                                            <select class="form-select" id="editType" name="Type">
                                                                <option value="CC">CC</option>
                                                                <option value="FC">FC</option>
                                                                <option value="MC">MC</option>
                                                                <option value="TC">TC</option>
                                                            </select>
                                                        </div>

                                                        <div class="input-group mt-3" style="width: auto">
                                                            <span class="input-group-text d-flex justify-content-center">
                                                                <i class="fa fa-book mt-2" aria-hidden="true">
                                                                    <strong><label for="editTH">ชื่อไทย</label></strong>
                                                                </i>
                                                            </span>
                                                            <input type="text" class="form-control" id="editTH" name="CompetencyNameTH" value="@cmpty.CompetencyNameTH" />
                                                        </div>

                                                        <div class="input-group mt-3" style="width: auto">
                                                            <span class="input-group-text d-flex justify-content-center">
                                                                <i class="fa fa-book mt-2" aria-hidden="true">
                                                                    <strong><label for="editEN">ชื่ออังกฤษ</label></strong>
                                                                </i>
                                                            </span>
                                                            <input type="text" class="form-control" id="editEN" name="CompetencyNameEN" value="@cmpty.CompetencyNameEN" />
                                                        </div>
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #d1ecf1; border-color: #99e9eb; color: #05487f ">
                                                                <strong>
                                                                    <label for="editCompetencyDesc">Definetion</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editCompetencyDesc" name="CompetencyDesc">@cmpty.CompetencyDesc</textarea>
                                                        </div>
                                                        <hr />
                                                        <div class="mt-3 list-group" style="width: 250px;">

                                                            <div class="input-group-text" style="background-color: #f8d7da; border-color: #ae6070; color: #b34045 ">
                                                                <div><strong>มีการใช้ Competency นี้หรือไม่?</strong></div>
                                                            </div>

                                                            <div class="input-group mt-2">
                                                                <div class="input-group-text">
                                                                    <input class="form-check-input mt-0" type="radio" value="true" name="Active" aria-label="Radio button for following text input" checked>
                                                                </div>
                                                                <div class="form-control">ใช้</div>
                                                            </div>
                                                            <div class="input-group mt-2">
                                                                <div class="input-group-text">
                                                                    <input class="form-check-input mt-0" type="radio" value="false" name="Active" aria-label="Radio button for following text input">
                                                                </div>
                                                                <div class="form-control">ไม่ใช้</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md ">
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #fff3cd; border-color: #dcb456; color: #dcb456 ">
                                                                <strong>
                                                                    <label for="editPl1">Pl1</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editPl1" name="PL1">@cmpty.Pl1</textarea>
                                                        </div>
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #fff3cd; border-color: #dcb456; color: #dcb456 ">
                                                                <strong>
                                                                    <label for="editPl2">Pl2</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editPl2" name="PL2">@cmpty.Pl2</textarea>
                                                        </div>
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #fff3cd; border-color: #dcb456; color: #dcb456 ">
                                                                <strong>
                                                                    <label for="editPl3">Pl3</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editPl3" name="PL3">@cmpty.Pl3</textarea>
                                                        </div>
                                                        <div class="input-group mt-3" style="width: auto; ">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #fff3cd; border-color: #dcb456; color: #dcb456 ">
                                                                <strong>
                                                                    <label for="editPl4">Pl4</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editPl4" name="PL4">@cmpty.Pl4</textarea>
                                                        </div>
                                                        <div class="input-group mt-3" style="width: auto;">
                                                            <span class="input-group-text d-flex justify-content-center" style="background-color: #fff3cd; border-color: #dcb456; color: #dcb456 ">
                                                                <strong>
                                                                    <label for="editPl5">Pl5</label>
                                                                </strong>
                                                            </span>
                                                            <textarea class="form-control" id="editPl5" name="PL5">@cmpty.Pl5</textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ยกเลิก</button>
                                                    <button type="submit" class="btn btn-primary "><i class="fa fa-floppy-o" aria-hidden="true"></i> <strong>บันทึก</strong></button>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade" id="deleteModal-@cmpty.CompetencyId" aria-labelledby="deleteModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-4">ต้องการที่จะลบรายวิชานี้หรือไม่?</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <h5>รหัส Competency: @cmpty.CompetencyId</h5>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                                                <a href="@Url.Action("DeleteCompetency", new { id = cmpty.CompetencyId })" class="btn btn-danger">ยืนยัน</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</main>


<script src="~/Scripts/jquery-3.4.1.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.dataTables.min.css" />
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>
<script src="https://cdn.datatables.net/fixedcolumns/4.2.2/js/dataTables.fixedColumns.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
<script type="text/javascript">
    var js = jQuery.noConflict(true);
    js(document).ready(function () {
        js('#myTable').DataTable({
            language: {
                search: "ค้นหา:", // Change the search label here
            },
            scrollY: 1000,
            
        });
    });
</script>

